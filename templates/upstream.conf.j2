# Upstream configuration for Employee Management Backend
upstream employee_backend {
    # Load balancing method
    least_conn;
    
    # Backend servers with health checks
{% for server in backend_servers %}
    server {{ server }} max_fails=3 fail_timeout=30s weight=1;
{% endfor %}
    
    # Keep-alive connections
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
}

# Health check upstream (for monitoring)
upstream backend_health {
{% for server in backend_servers %}
    server {{ server }};
{% endfor %}
}